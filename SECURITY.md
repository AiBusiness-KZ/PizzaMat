# üîê –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ PizzaMat

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ production

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  - Username: `admin`
  - Password: `admin123`

**‚ùó –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ò–ó–ú–ï–ù–ò–¢–¨ –ø–µ—Ä–µ–¥ production!**

–í —Ñ–∞–π–ª–µ `backend/app/routes/auth.py` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è:
```python
ADMIN_CREDENTIALS = {
    "admin": {
        "password_hash": get_password_hash("admin123"),  # CHANGE THIS!
        "is_admin": True
    }
}
```

**–ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å:**
1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 16 —Å–∏–º–≤–æ–ª–æ–≤)
2. –ó–∞–º–µ–Ω–∏—Ç–µ `"admin123"` –Ω–∞ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### 2. –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏

**‚ùó –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ production!**

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:

```bash
# JWT Secret (–º–∏–Ω–∏–º—É–º 64 —Å–∏–º–≤–æ–ª–∞)
openssl rand -hex 32

# Database Password (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
openssl rand -base64 32

# Redis Password
openssl rand -base64 24
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- `.env.example` - –¥–ª—è development (–º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å)
- `.env.production.example` - —à–∞–±–ª–æ–Ω –¥–ª—è production
- `.env` - **–ù–ò–ö–û–ì–î–ê –ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨!**

**Checklist –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**
- [ ] `JWT_SECRET` –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- [ ] `POSTGRES_PASSWORD` –∏–∑–º–µ–Ω—ë–Ω
- [ ] `REDIS_PASSWORD` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] `DEBUG=false` –≤ production
- [ ] `ALLOWED_ORIGINS` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∞—à –¥–æ–º–µ–Ω
- [ ] –í—Å–µ `CHANGE_ME` –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–º–µ–Ω–µ–Ω—ã

### 4. –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ endpoints

**–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –∑–∞—â–∏—â–µ–Ω–∞ JWT:**
- `/api/admin/*` - —Ç—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π admin —Ç–æ–∫–µ–Ω
- `/api/auth/login` - rate limited (5 –ø–æ–ø—ã—Ç–æ–∫ –≤ –º–∏–Ω—É—Ç—É)

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω:**
```bash
# Login request
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# Response
{
  "access_token": "eyJ...",
  "token_type": "bearer",
  "is_admin": true
}

# Use token in requests
curl -X GET http://localhost:8000/api/admin/categories \
  -H "Authorization: Bearer eyJ..."
```

### 5. Rate Limiting

**–¢–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã:**
- Login endpoint: **5 –ø–æ–ø—ã—Ç–æ–∫ / 60 —Å–µ–∫—É–Ω–¥**
- Admin endpoints: –∑–∞—â–∏—â–µ–Ω—ã JWT (–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
- Public endpoints: –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ rate limiting
- –î–æ–±–∞–≤—å—Ç–µ rate limiting –Ω–∞ public endpoints
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WAF/CDN (Cloudflare)

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-type
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ magic bytes (—Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (10MB)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ Sanitization –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

**–î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)
- GIF (.gif)

### 7. Database Security

**Best practices:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ (–º–∏–Ω. 32 —Å–∏–º–≤–æ–ª–∞)
2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø (—Ç–æ–ª—å–∫–æ localhost –∏–ª–∏ VPN)
3. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
5. SSL/TLS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ production

**–í docker-compose.prod.yml:**
```yaml
postgres:
  ports:
    - "127.0.0.1:5432:5432"  # –¢–æ–ª—å–∫–æ localhost!
```

### 8. CORS Configuration

**Development:**
```python
ALLOWED_ORIGINS=["http://localhost:3000","http://localhost:5173"]
```

**Production:**
```python
ALLOWED_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]
```

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
- `allow_origins=["*"]` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ª—é–±–æ–π –¥–æ–º–µ–Ω
- HTTP –≤ production (—Ç–æ–ª—å–∫–æ HTTPS!)

### 9. SSL/TLS

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ production:**
- HTTPS –¥–ª—è frontend
- HTTPS –¥–ª—è backend API
- HTTPS –¥–ª—è webhooks

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- Let's Encrypt –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ú–∏–Ω–∏–º—É–º TLS 1.2
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏

### 10. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ß—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:**
- ‚úÖ –ù–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ admin –ø–∞–Ω–µ–ª–∏
- ‚úÖ Upload —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚ö†Ô∏è –ù–ï –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã!

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- Sentry –¥–ª—è error tracking
- ELK/Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
- CloudWatch/Datadog –≤ –æ–±–ª–∞–∫–µ

---

## üõ°Ô∏è Checklist –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º:
- [ ] –ò–∑–º–µ–Ω—ë–Ω admin –ø–∞—Ä–æ–ª—å
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã
- [ ] –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª –∏–∑ `.env.production.example`
- [ ] `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:
- [ ] `DEBUG=false`
- [ ] HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º
- [ ] Database password —Å–∏–ª—å–Ω—ã–π (–º–∏–Ω. 32 —Å–∏–º–≤–æ–ª–∞)
- [ ] JWT secret —É–Ω–∏–∫–∞–ª—å–Ω—ã–π (–º–∏–Ω. 64 —Å–∏–º–≤–æ–ª–∞)
- [ ] Redis password —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Backups –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- [ ] –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç rate limiting
- [ ] –¢–µ—Å—Ç file upload validation
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
- [ ] Scan –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, OWASP ZAP)

---

## üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. Hardcoded admin credentials
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è MVP

**–ü—Ä–æ–±–ª–µ–º–∞:** –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤ –∫–æ–¥–µ

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É Users –≤ –ë–î
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å bcrypt
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
- –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 2. In-memory rate limiting
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** Rate limiting —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è distributed rate limiting
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å slowapi –∏–ª–∏ similar

### 3. No email verification
**–°—Ç–∞—Ç—É—Å:** üìù –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ MVP

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å email verification –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø–æ email

---

## üìû –°–æ–æ–±—â–∏—Ç—å –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞: security@yourdomain.com
3. –í–∫–ª—é—á–∏—Ç–µ:
   - –û–ø–∏—Å–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
   - –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
   - –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)

–ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤.

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –û–∫—Ç—è–±—Ä—å 2024  
**–í–µ—Ä—Å–∏—è:** 1.0.0
